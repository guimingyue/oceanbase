================ expression convert_tz ================
SELECT CONVERT_TZ('2021-01-01 12:00:00','+00:00','+08:00');
CONVERT_TZ('2021-01-01 12:00:00','+00:00','+08:00')
2021-01-01 20:00:00.000000
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:00','+08:00');
CONVERT_TZ('2021-01-01 12:00:00','+01:00','+08:00')
2021-01-01 19:00:00.000000
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:00','+06:30');
CONVERT_TZ('2021-01-01 12:00:00','+01:00','+06:30')
2021-01-01 17:30:00.000000
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:00','+10:10');
CONVERT_TZ('2021-01-01 12:00:00','+01:00','+10:10')
2021-01-01 21:10:00.000000
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:30','+13:00');
CONVERT_TZ('2021-01-01 12:00:00','+01:30','+13:00')
2021-01-01 23:30:00.000000
SELECT CONVERT_TZ('2021-01-01 12:00:00','-11:30','+13:00');
CONVERT_TZ('2021-01-01 12:00:00','-11:30','+13:00')
2021-01-02 12:30:00.000000
SELECT CONVERT_TZ('2021-01-01 12:00:00','-12:00','+13:00');
CONVERT_TZ('2021-01-01 12:00:00','-12:00','+13:00')
2021-01-02 13:00:00.000000
SELECT CONVERT_TZ('2021-01-01 00:00:00','-12:00','+13:00');
CONVERT_TZ('2021-01-01 00:00:00','-12:00','+13:00')
2021-01-02 01:00:00.000000
SELECT CONVERT_TZ('2021-01-01 23:59:59','-12:00','+13:00');
CONVERT_TZ('2021-01-01 23:59:59','-12:00','+13:00')
2021-01-03 00:59:59.000000
SELECT CONVERT_TZ('2021-01-01 13:19:38','-10:38','+10:12');
CONVERT_TZ('2021-01-01 13:19:38','-10:38','+10:12')
2021-01-02 10:09:38.000000
SELECT CONVERT_TZ('2021-01-01 12:23:35','-09:23','-11:11');
CONVERT_TZ('2021-01-01 12:23:35','-09:23','-11:11')
2021-01-01 10:35:35.000000
SELECT CONVERT_TZ('2021-01-01 00:01:00','+10:00','-11:00');
CONVERT_TZ('2021-01-01 00:01:00','+10:00','-11:00')
2020-12-31 03:01:00.000000
SELECT CONVERT_TZ('2021-01-01 00:11:00','+00:00','-11:00');
CONVERT_TZ('2021-01-01 00:11:00','+00:00','-11:00')
2020-12-31 13:11:00.000000
SELECT CONVERT_TZ('2021-03-01 00:11:00','+00:00','-11:00');
CONVERT_TZ('2021-03-01 00:11:00','+00:00','-11:00')
2021-02-28 13:11:00.000000
SELECT CONVERT_TZ('2021-06-01 00:11:00','+00:00','-11:00');
CONVERT_TZ('2021-06-01 00:11:00','+00:00','-11:00')
2021-05-31 13:11:00.000000
SELECT CONVERT_TZ('2020-03-01 00:11:00','+00:00','-11:00');
CONVERT_TZ('2020-03-01 00:11:00','+00:00','-11:00')
2020-02-29 13:11:00.000000
SELECT CONVERT_TZ('2020-02-28 23:11:00','-00:00','+11:00');
CONVERT_TZ('2020-02-28 23:11:00','-00:00','+11:00')
2020-02-29 10:11:00.000000
SELECT CONVERT_TZ('2020-12-31 23:11:00','-05:00','+11:00');
CONVERT_TZ('2020-12-31 23:11:00','-05:00','+11:00')
2021-01-01 15:11:00.000000
SELECT CONVERT_TZ('2020-12-31 23:11:00',null,'+11:00');
CONVERT_TZ('2020-12-31 23:11:00',null,'+11:00')
NULL
SELECT CONVERT_TZ('2020-12-31 23:11:00','+11:00', null);
CONVERT_TZ('2020-12-31 23:11:00','+11:00', null)
NULL
SELECT CONVERT_TZ(null,'-13:00','+11:00');
CONVERT_TZ(null,'-13:00','+11:00')
NULL
SELECT CONVERT_TZ(null, null,'+11:00');
CONVERT_TZ(null, null,'+11:00')
NULL
SELECT CONVERT_TZ(null, null, null);
CONVERT_TZ(null, null, null)
NULL
SELECT CONVERT_TZ('2020-12-31 23:11:00','America/Merida','Asia/Tokyo');
CONVERT_TZ('2020-12-31 23:11:00','America/Merida','Asia/Tokyo')
2021-01-01 14:11:00.000000
SELECT CONVERT_TZ('2021-01-01 00:11:00','America/Merida','Australia/Darwin');
CONVERT_TZ('2021-01-01 00:11:00','America/Merida','Australia/Darwin')
2021-01-01 15:41:00.000000
SELECT CONVERT_TZ('2021-01-01 00:11:00','America/Merida','Europe/Amsterdam');
CONVERT_TZ('2021-01-01 00:11:00','America/Merida','Europe/Amsterdam')
2021-01-01 07:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','Europe/Amsterdam','America/Merida');
CONVERT_TZ('2021-01-01 07:11:00','Europe/Amsterdam','America/Merida')
2021-01-01 00:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','MET','Libya');
CONVERT_TZ('2021-01-01 07:11:00','MET','Libya')
2021-01-01 08:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','MET','MST');
CONVERT_TZ('2021-01-01 07:11:00','MET','MST')
2020-12-31 23:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','PRC','MST');
CONVERT_TZ('2021-01-01 07:11:00','PRC','MST')
2020-12-31 16:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','PRC','ROC');
CONVERT_TZ('2021-01-01 07:11:00','PRC','ROC')
2021-01-01 07:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','UCT','ROC');
CONVERT_TZ('2021-01-01 07:11:00','UCT','ROC')
2021-01-01 15:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','Universal','ROC');
CONVERT_TZ('2021-01-01 07:11:00','Universal','ROC')
2021-01-01 15:11:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00','Pacific/Marquesas','ROC');
CONVERT_TZ('2021-01-01 07:11:00','Pacific/Marquesas','ROC')
2021-01-02 00:41:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00','GMT+0','ROC');
CONVERT_TZ('2021-02-28 17:11:00','GMT+0','ROC')
2021-03-01 01:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00','GMT+0','Singapore');
CONVERT_TZ('2021-02-28 17:11:00','GMT+0','Singapore')
2021-03-01 01:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00','US/Michigan','ROC');
CONVERT_TZ('2021-02-28 17:11:00','US/Michigan','ROC')
2021-03-01 06:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00', null,'ROC');
CONVERT_TZ('2021-02-28 17:11:00', null,'ROC')
NULL
SELECT CONVERT_TZ('2021-02-28 17:11:00','US/Michigan', null);
CONVERT_TZ('2021-02-28 17:11:00','US/Michigan', null)
NULL
SELECT CONVERT_TZ('2021-02-28 17:11:00', null, null);
CONVERT_TZ('2021-02-28 17:11:00', null, null)
NULL
SELECT CONVERT_TZ('2021-02-28 17:11:00', '+00:00','ROC');
CONVERT_TZ('2021-02-28 17:11:00', '+00:00','ROC')
2021-03-01 01:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00', '+00:00','US/Michigan');
CONVERT_TZ('2021-02-28 17:11:00', '+00:00','US/Michigan')
2021-02-28 12:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00', 'ROC','+00:00');
CONVERT_TZ('2021-02-28 17:11:00', 'ROC','+00:00')
2021-02-28 09:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00', 'US/Michigan', '+00:00');
CONVERT_TZ('2021-02-28 17:11:00', 'US/Michigan', '+00:00')
2021-02-28 22:11:00.000000
SELECT CONVERT_TZ('2021-02-28 17:11:00', 'ROC','+12:58');
CONVERT_TZ('2021-02-28 17:11:00', 'ROC','+12:58')
2021-02-28 22:09:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00', 'UCT','-12:58');
CONVERT_TZ('2021-01-01 07:11:00', 'UCT','-12:58')
2020-12-31 18:13:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00', '-12:58','UCT');
CONVERT_TZ('2021-01-01 07:11:00', '-12:58','UCT')
2021-01-01 20:09:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00', '-12:58','US/Michigan');
CONVERT_TZ('2021-01-01 07:11:00', '-12:58','US/Michigan')
2021-01-01 15:09:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00', '+05:12','MET');
CONVERT_TZ('2021-01-01 07:11:00', '+05:12','MET')
2021-01-01 02:59:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00', '+03:32','PRC');
CONVERT_TZ('2021-01-01 07:11:00', '+03:32','PRC')
2021-01-01 11:39:00.000000
SELECT CONVERT_TZ('2021-01-01 07:11:00', '+11:32','PRC');
CONVERT_TZ('2021-01-01 07:11:00', '+11:32','PRC')
2021-01-01 03:39:00.000000
SELECT CONVERT_TZ('2004-01-01 12:00:00','-13:00','+10:00');
CONVERT_TZ('2004-01-01 12:00:00','-13:00','+10:00')
NULL
SELECT CONVERT_TZ('2004-01-01 12:00:00','-12:00','+14:00');
CONVERT_TZ('2004-01-01 12:00:00','-12:00','+14:00')
NULL
SELECT CONVERT_TZ('2004-01-01 12:00:00','-13:00','ABC');
CONVERT_TZ('2004-01-01 12:00:00','-13:00','ABC')
NULL
SELECT CONVERT_TZ('2004-01-01 12:00:00','-12:00','OK');
CONVERT_TZ('2004-01-01 12:00:00','-12:00','OK')
NULL
drop table if exists t;
create table t(c1 timestamp);
insert into t values(CONVERT_TZ('2004-01-01 12:00:00','-13:00','+10:00'));
insert into t values(CONVERT_TZ('2004-01-01 12:00:00','-12:00','+14:00'));
insert into t values(CONVERT_TZ('2004-01-01 12:00:00','-13:00','ABC'));
insert into t values(CONVERT_TZ('2004-01-01 12:00:00','-12:00','OK'));
select * from t;
c1
NULL
NULL
NULL
NULL
delete from t;
select convert_tz('9999-12-31 20:00:00', '+02:00', '+06:00');
convert_tz('9999-12-31 20:00:00', '+02:00', '+06:00')
NULL
select convert_tz('0000-01-01 01:00:00', '+00:00', '-02:00');
convert_tz('0000-01-01 01:00:00', '+00:00', '-02:00')
NULL
insert into t values(convert_tz('9999-12-31 20:00:00', '+02:00', '+06:00'));
insert into t values(convert_tz('0000-01-01 01:00:00', '+00:00', '-02:00'));
select * from t;
c1
NULL
NULL
SELECT CONVERT_TZ(123456,'-12:00','+10:00');
CONVERT_TZ(123456,'-12:00','+10:00')
NULL
SELECT CONVERT_TZ('','-12:00','+10:00');
CONVERT_TZ('','-12:00','+10:00')
NULL
SELECT CONVERT_TZ('aa','-12:00','+10:00');
CONVERT_TZ('aa','-12:00','+10:00')
NULL
SELECT CONVERT_TZ('张三','-12:00','+10:00');
CONVERT_TZ('张三','-12:00','+10:00')
NULL
SELECT CONVERT_TZ('1asd561ad','-12:00','+10:00');
CONVERT_TZ('1asd561ad','-12:00','+10:00')
NULL
SELECT CONVERT_TZ('￥￥%……&*￥','-12:00','+10:00');
CONVERT_TZ('￥￥%……&*￥','-12:00','+10:00')
NULL
drop table t;
create table t(c1 year);
insert into t values('1901'),('2155'), ('0000'), ('0001');
SELECT c1, CONVERT_TZ(c1,'+00:00','+00:00') from t;
c1	CONVERT_TZ(c1,'+00:00','+00:00')
1901	NULL
2155	NULL
0000	NULL
2001	NULL
drop table t;
create table t(a1 int,a2 year,c1 timestamp,c2 timestamp);
insert into t values(1,'1998','1998-12-12 12:12:12','2038-01-19 03:14:07');
insert into t values(2,'2002','2002-02-02 10:00:00','2034-02-22 00:50:20');
insert into t values(3,'2006','2006-04-15 06:06:20','2038-01-19 03:14:07');
insert into t values(4,'2012','2012-12-12 12:12:12','2030-08-16 14:05:50');
select c1,c2 ,case c1 when convert_tz(c1,'+06:00','+00:00')<'2006-04-15 06:06:20' then convert_tz('2020-02-02 02:02:02','+00:00','+00:00') else convert_tz('1999-09-09 09:09:09','+00:00','+00:00') end as c1 from t;
c1	c2	c1
1998-12-12 12:12:12	2038-01-19 03:14:07	1999-09-09 09:09:09.000000
2002-02-02 10:00:00	2034-02-22 00:50:20	1999-09-09 09:09:09.000000
2006-04-15 06:06:20	2038-01-19 03:14:07	1999-09-09 09:09:09.000000
2012-12-12 12:12:12	2030-08-16 14:05:50	1999-09-09 09:09:09.000000
drop table t;
create table t(c1 timestamp(0), c2 timestamp(3), c3 decimal(20,4));
insert into t values('2020-01-01 12:00:00.123456', '2020-01-01 12:00:00.123456', '20200101120000.123456');
select c1, convert_tz(c1, '+00:00', '+08:00') from t;
c1	convert_tz(c1, '+00:00', '+08:00')
2020-01-01 12:00:00	2020-01-01 20:00:00
select c2, convert_tz(c2, '+00:00', '+08:00') from t;
c2	convert_tz(c2, '+00:00', '+08:00')
2020-01-01 12:00:00.123	2020-01-01 20:00:00.123
select c3, convert_tz(c3, '+00:00', '+08:00') from t;
c3	convert_tz(c3, '+00:00', '+08:00')
20200101120000.1235	2020-01-01 20:00:00.1235
drop table t;
SELECT CONVERT_TZ('2007-03-11 2:00:00','US/Eastern','US/Central') AS time1,
CONVERT_TZ('2007-03-11 2:00:01','US/Eastern','US/Central') AS time2,
CONVERT_TZ('2007-03-11 3:00:00','US/Eastern','US/Central') AS time3,
CONVERT_TZ('2007-03-11 3:00:01','US/Eastern','US/Central') AS time4;
time1	time2	time3	time4
NULL	NULL	2007-03-11 01:00:00.000000	2007-03-11 01:00:01.000000
SELECT CONVERT_TZ('2007-03-11 2:00:00','US/Eastern','+00:00') AS time1,
CONVERT_TZ('2007-03-11 3:00:00','US/Eastern','+00:00') AS time2,
CONVERT_TZ('2007-03-11 3:00:01','US/Eastern','+00:00') AS time3;
time1	time2	time3
NULL	2007-03-11 07:00:00.000000	2007-03-11 07:00:01.000000
SELECT CONVERT_TZ('2007-11-04 01:00:00','US/Eastern','+00:00') AS time1,
CONVERT_TZ('2007-11-04 01:00:01','US/Eastern','+00:00') AS time2,
CONVERT_TZ('2007-11-04 02:00:00','US/Eastern','+00:00') AS time3,
CONVERT_TZ('2007-11-04 02:00:01','US/Eastern','+00:00') AS time4;
time1	time2	time3	time4
2007-11-04 05:00:00.000000	2007-11-04 05:00:01.000000	2007-11-04 07:00:00.000000	2007-11-04 07:00:01.000000
create table t(c1 datetime);
insert into t values('2007-03-11 2:00:00'), ('2007-03-11 2:00:01'), ('2007-03-11 3:00:00'), ('2007-03-11 3:00:01');
insert into t values('2007-11-04 1:00:00'), ('2007-11-04 1:00:01'), ('2007-11-04 2:00:00'), ('2007-11-04 2:00:01');
select convert_tz(c1, 'US/Eastern', '+00:00') from t;
convert_tz(c1, 'US/Eastern', '+00:00')
NULL
NULL
2007-03-11 07:00:00
2007-03-11 07:00:01
2007-11-04 05:00:00
2007-11-04 05:00:01
2007-11-04 07:00:00
2007-11-04 07:00:01
drop table t;
create table t(c1 timestamp);
insert into t values('2007-03-11 1:59:59'), ('2007-03-11 3:00:00'), ('2007-03-11 3:00:01');
insert into t values('2007-11-04 1:00:00'), ('2007-11-04 1:00:01'), ('2007-11-04 2:00:00'), ('2007-11-04 2:00:01');
select convert_tz(c1, 'US/Eastern', '+00:00') from t;
convert_tz(c1, 'US/Eastern', '+00:00')
2007-03-11 06:59:59
2007-03-11 07:00:00
2007-03-11 07:00:01
2007-11-04 05:00:00
2007-11-04 05:00:01
2007-11-04 07:00:00
2007-11-04 07:00:01
drop table t;
