result_format: 4
explain_protocol: 2
drop table if exists xy_t1, xy_t2;
create table xy_t1(c1 int, c2 int);
create table xy_t2(c1 int, c2 int);
insert/*insert trace*/ into xy_t1 values(0, 0), (1,1), (2,2), (5,5), (5,5), (6,7), (6,6), (7,7);
insert/*insert trace*/ into xy_t2 values(1,1), (3,3), (5,5), (5,5), (6,6);


# ************** 测试anti仅含equal condition的情况 *******
EXPLAIN select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|     |3        |89  |
|1 | TABLE SCAN          |xy_t1|8        |38  |
|2 | MATERIAL            |     |5        |38  |
|3 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t1.c1 = xy_t2.c1]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1]), filter(nil)
  3 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 |    2 |
|    7 |    7 |
+------+------+

EXPLAIN select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE ANTI JOIN|     |3        |91  |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 | SORT          |     |5        |41  |
|4 |  TABLE SCAN   |xy_t2|5        |37  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 |    2 |
|    7 |    7 |
+------+------+

EXPLAIN select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|     |3        |86  |
|1 | TABLE SCAN         |xy_t2|5        |37  |
|2 | TABLE SCAN         |xy_t1|8        |38  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 |    2 |
|    7 |    7 |
+------+------+
# *************  end *******************

# ************** 测试anti含other condition的情况 *******
EXPLAIN select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|     |7        |92  |
|1 | TABLE SCAN          |xy_t1|8        |38  |
|2 | MATERIAL            |     |5        |39  |
|3 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t1.c1 = xy_t2.c1], [xy_t1.c2 > xy_t2.c2]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil)
  3 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    6 |    6 |
|    7 |    7 |
+------+------+

EXPLAIN select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE ANTI JOIN|     |7        |90  |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 | SORT          |     |5        |42  |
|4 |  TABLE SCAN   |xy_t2|5        |37  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    6 |    6 |
|    7 |    7 |
+------+------+

EXPLAIN select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|     |7        |85  |
|1 | TABLE SCAN         |xy_t2|5        |37  |
|2 | TABLE SCAN         |xy_t1|8        |38  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    6 |    6 |
|    7 |    7 |
+------+------+
# ************** end *********

# ************** 测试semi仅含equal condition的情况 *******
EXPLAIN select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|     |5        |89  |
|1 | TABLE SCAN          |xy_t1|8        |38  |
|2 | MATERIAL            |     |5        |38  |
|3 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t1.c1 = xy_t2.c1]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1]), filter(nil)
  3 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    6 |    7 |
|    6 |    6 |
+------+------+

EXPLAIN select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE SEMI JOIN|     |5        |91  |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 | SORT          |     |5        |41  |
|4 |  TABLE SCAN   |xy_t2|5        |37  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    6 |    7 |
|    6 |    6 |
+------+------+

EXPLAIN select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|     |5        |86  |
|1 | TABLE SCAN         |xy_t2|5        |37  |
|2 | TABLE SCAN         |xy_t1|8        |38  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    6 |    7 |
|    6 |    6 |
+------+------+
# *************  end *******************

# ************** 测试semi join含other condition的情况 *******
EXPLAIN select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|     |2        |92  |
|1 | TABLE SCAN          |xy_t1|8        |38  |
|2 | MATERIAL            |     |5        |39  |
|3 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t1.c1 = xy_t2.c1], [xy_t1.c2 > xy_t2.c2]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil)
  3 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_NL(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+
| c1   | c2   |
+------+------+
|    6 |    7 |
+------+------+

EXPLAIN select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE SEMI JOIN|     |2        |90  |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 | SORT          |     |5        |42  |
|4 |  TABLE SCAN   |xy_t2|5        |37  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_MERGE(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+
| c1   | c2   |
+------+------+
|    6 |    7 |
+------+------+

EXPLAIN select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|     |2        |85  |
|1 | TABLE SCAN         |xy_t2|5        |37  |
|2 | TABLE SCAN         |xy_t1|8        |38  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ USE_HASH(xy_t1, xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+
| c1   | c2   |
+------+------+
|    6 |    7 |
+------+------+
# ************** end *********

# ************** 测试上层算子需要投影的情况 ********
EXPLAIN select /*+ USE_NL(xy_t1, xy_t2)*/ c1, c2, c1, c2  from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|     |7        |92  |
|1 | TABLE SCAN          |xy_t1|8        |38  |
|2 | MATERIAL            |     |5        |39  |
|3 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2], [xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t1.c1 = xy_t2.c1], [xy_t1.c2 > xy_t2.c2]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil)
  3 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_NL(xy_t1, xy_t2)*/ c1, c2, c1, c2  from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+------+------+
| c1   | c2   | c1   | c2   |
+------+------+------+------+
|    0 |    0 |    0 |    0 |
|    1 |    1 |    1 |    1 |
|    2 |    2 |    2 |    2 |
|    5 |    5 |    5 |    5 |
|    5 |    5 |    5 |    5 |
|    6 |    6 |    6 |    6 |
|    7 |    7 |    7 |    7 |
+------+------+------+------+

EXPLAIN select /*+ USE_MERGE(xy_t1, xy_t2)*/ c1, c2, c1, c2  from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE ANTI JOIN|     |7        |90  |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 | SORT          |     |5        |42  |
|4 |  TABLE SCAN   |xy_t2|5        |37  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2], [xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_MERGE(xy_t1, xy_t2)*/ c1, c2, c1, c2  from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+------+------+
| c1   | c2   | c1   | c2   |
+------+------+------+------+
|    0 |    0 |    0 |    0 |
|    1 |    1 |    1 |    1 |
|    2 |    2 |    2 |    2 |
|    5 |    5 |    5 |    5 |
|    5 |    5 |    5 |    5 |
|    6 |    6 |    6 |    6 |
|    7 |    7 |    7 |    7 |
+------+------+------+------+

EXPLAIN select /*+ USE_HASH(xy_t1, xy_t2)*/ c1, c2, c1, c2  from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|     |7        |85  |
|1 | TABLE SCAN         |xy_t2|5        |37  |
|2 | TABLE SCAN         |xy_t1|8        |38  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2], [xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ USE_HASH(xy_t1, xy_t2)*/ c1, c2, c1, c2  from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+------+------+
| c1   | c2   | c1   | c2   |
+------+------+------+------+
|    0 |    0 |    0 |    0 |
|    1 |    1 |    1 |    1 |
|    2 |    2 |    2 |    2 |
|    5 |    5 |    5 |    5 |
|    5 |    5 |    5 |    5 |
|    6 |    6 |    6 |    6 |
|    7 |    7 |    7 |    7 |
+------+------+------+------+

EXPLAIN select /*+ USE_NL(xy_t1, xy_t2)*/  c1, c2, c1, c2 from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|     |2        |92  |
|1 | TABLE SCAN          |xy_t1|8        |38  |
|2 | MATERIAL            |     |5        |39  |
|3 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2], [xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t1.c1 = xy_t2.c1], [xy_t1.c2 > xy_t2.c2]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil)
  3 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_NL(xy_t1, xy_t2)*/  c1, c2, c1, c2 from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+------+------+
| c1   | c2   | c1   | c2   |
+------+------+------+------+
|    6 |    7 |    6 |    7 |
+------+------+------+------+

EXPLAIN select /*+ USE_MERGE(xy_t1, xy_t2)*/ c1, c2, c1, c2 from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE SEMI JOIN|     |2        |90  |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 | SORT          |     |5        |42  |
|4 |  TABLE SCAN   |xy_t2|5        |37  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2], [xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)

select /*+ USE_MERGE(xy_t1, xy_t2)*/ c1, c2, c1, c2 from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+------+------+
| c1   | c2   | c1   | c2   |
+------+------+------+------+
|    6 |    7 |    6 |    7 |
+------+------+------+------+

EXPLAIN select /*+ USE_HASH(xy_t1, xy_t2)*/ c1, c2, c1, c2 from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|     |2        |85  |
|1 | TABLE SCAN         |xy_t2|5        |37  |
|2 | TABLE SCAN         |xy_t1|8        |38  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2], [xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c2 > xy_t2.c2])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ USE_HASH(xy_t1, xy_t2)*/ c1, c2, c1, c2 from xy_t1 where exists (select 1 from xy_t2 where xy_t1.c1 = xy_t2.c1 and xy_t1.c2 > xy_t2.c2);
+------+------+------+------+
| c1   | c2   | c1   | c2   |
+------+------+------+------+
|    6 |    7 |    6 |    7 |
+------+------+------+------+
# ************** end ********
drop table xy_t1, xy_t2;

drop table if exists xy_x_t, xy_y_t;
create table xy_x_t(x1 int, x2 varchar(100));
create table xy_y_t(y1 int, y2 varchar(100));
insert/*insert trace*/ into xy_x_t values(NULL,"VECPQ"),(NULL,"bdarkyzh"),(NULL,"it"),(NULL,"tgn"),(NULL,"had"),(NULL,"b"),(NULL,"g"),(NULL,"it's"),(NULL,"r"),(NULL,"KSZCK"),(NULL,"s"),(NULL,"UJRXI"),(NULL,"HLKDP"),(NULL,"about"),(NULL,"ROITX"),(NULL,"OEJAP"),(NULL,"u"),(NULL,"egisjnib"),(NULL,"ozkegisjn"),(NULL,"oh"),(NULL,"lrlmds"),(NULL,"r"),(NULL,"a"),(NULL,"here"),(NULL,"ihrad"),(NULL,"good"),(-2139029504,"eyqjoq"),(-2061369344,"GSUGA"),(-1882128384,"there"),(-1552613376,"d"),(-1511981056,"and"),(-1504706560,"and"),(-1259929600,"o"),(-973340672,"at"),(-918945792,"DNMFW"),(-778960896,"r"),(-753336320,"PKGAE"),(-593821696,"UGSPN"),(-457179136,"got"),(-314638336,"will"),(-233701376,"o"),(-104202240,"SUEUH"),(0,"yzh"),(0,"i"),(1,"TQOYB"),(1,"FFHTJ"),(2,"it's"),(2,"ezcuilyxac"),(2,"VZLUW"),(2,"want"),(2,"think"),(3,"prsazev"),(3,"get"),(3,"out"),(4,"a"),(4,"PVYPZ"),(4,"k"),(4,"bpqswbeyqj"),(4,"isjn"),(4,"that's"),(4,"well"),(5,"arkyz"),(5,"w"),(5,"with"),(5,"just"),(5,"PFBCU"),(6,"uyslpcybda"),(6,"co"),(6,"u"),(6,"j"),(6,"g"),(7,"cybdark"),(7,"BKWPE"),(8,"lmdsl"),(8,"NNIGT"),(8,"of"),(9,"etu"),(9,"TBMEI"),(9,"QPPLC"),(9,"mdsl"),(27262976,"n"),(162267136,"to"),(199884800,"y"),(334364672,"h"),(597295104,"did"),(748814336,"rhljip"),(769916928,"OQKEV"),(839778304,"USTRY"),(947585024,"hey"),(1210777600,"want"),(1232601088,"azev"),(1250689024,"a"),(1329463296,"QAMOL"),(1573126144,"zcuilyx"),(1594753024,"yeah"),(1730215936,"PMUMX"),(1925709824,"g"),(2048262144,"b"),(2082275328,"k"),(2131492864,"was");
insert/*insert trace*/ into xy_y_t values(NULL,"mmkfu"),(NULL,"c"),(NULL,"know"),(NULL,"ZYTQH"),(NULL,"j"),(NULL,"y"),(NULL,"what"),(NULL,"SXXNL"),(NULL,"b"),(NULL,"NFZFZ"),(-1992359936,"not"),(-1711210496,"uoorvy"),(-1150287872,"BKNFS"),(-926613504,"was"),(-858128384,"y"),(-549126144,"v"),(-537198592,"now"),(-491651072,"t"),(-66125824,"here"),(0,"XCYGJ"),(1,"YGHBI"),(2,"g"),(6,"kfuoorvyvn"),(7,"EGBLS"),(9,"jsnsdfm"),(1584463872,"face");


EXPLAIN select /*+use_hash(xy_x_t xy_y_t)*/ * from xy_x_t where x1 in (select y1 from xy_y_t where y2 < xy_x_t.x2);
Query Plan
===============================================
|ID|OPERATOR            |NAME  |EST. ROWS|COST|
-----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|      |9        |273 |
|1 | TABLE SCAN         |xy_y_t|26       |42  |
|2 | TABLE SCAN         |xy_x_t|100      |92  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), 
      equal_conds([xy_x_t.x1 = xy_y_t.y1]), other_conds([xy_y_t.y2 < xy_x_t.x2])
  1 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), 
      access([xy_y_t.y2], [xy_y_t.y1]), partitions(p0)
  2 - output([xy_x_t.x2], [xy_x_t.x1]), filter(nil), 
      access([xy_x_t.x2], [xy_x_t.x1]), partitions(p0)

select /*+use_hash(xy_x_t xy_y_t)*/ * from xy_x_t where x1 in (select y1 from xy_y_t where y2 < xy_x_t.x2);
+------+------------+
| x1   | x2         |
+------+------------+
|    0 | yzh        |
|    2 | it's       |
|    2 | VZLUW      |
|    2 | want       |
|    2 | think      |
|    6 | uyslpcybda |
|    6 | u          |
|    9 | TBMEI      |
|    9 | QPPLC      |
|    9 | mdsl       |
+------+------------+
EXPLAIN select /*+use_merge(xy_x_t xy_y_t)*/ * from xy_x_t where x1 in (select y1 from xy_y_t where y2 < xy_x_t.x2);
Query Plan
==========================================
|ID|OPERATOR       |NAME  |EST. ROWS|COST|
------------------------------------------
|0 |MERGE SEMI JOIN|      |9        |607 |
|1 | SORT          |      |100      |443 |
|2 |  TABLE SCAN   |xy_x_t|100      |92  |
|3 | SORT          |      |26       |128 |
|4 |  TABLE SCAN   |xy_y_t|26       |42  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), 
      equal_conds([xy_x_t.x1 = xy_y_t.y1]), other_conds([xy_y_t.y2 < xy_x_t.x2])
  1 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), sort_keys([xy_x_t.x1, ASC])
  2 - output([xy_x_t.x2], [xy_x_t.x1]), filter(nil), 
      access([xy_x_t.x2], [xy_x_t.x1]), partitions(p0)
  3 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), sort_keys([xy_y_t.y1, ASC])
  4 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), 
      access([xy_y_t.y2], [xy_y_t.y1]), partitions(p0)

select /*+use_merge(xy_x_t xy_y_t)*/ * from xy_x_t where x1 in (select y1 from xy_y_t where y2 < xy_x_t.x2);
+------+------------+
| x1   | x2         |
+------+------------+
|    0 | yzh        |
|    2 | think      |
|    2 | want       |
|    2 | VZLUW      |
|    2 | it's       |
|    6 | uyslpcybda |
|    6 | u          |
|    9 | TBMEI      |
|    9 | QPPLC      |
|    9 | mdsl       |
+------+------------+
EXPLAIN select /*+use_nl(xy_x_t xy_y_t)*/ * from xy_x_t where x1 in (select y1 from xy_y_t where y2 < xy_x_t.x2);
Query Plan
================================================
|ID|OPERATOR             |NAME  |EST. ROWS|COST|
------------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|      |9        |2493|
|1 | TABLE SCAN          |xy_x_t|100      |92  |
|2 | MATERIAL            |      |26       |106 |
|3 |  TABLE SCAN         |xy_y_t|26       |42  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), 
      conds([xy_y_t.y2 < xy_x_t.x2], [xy_x_t.x1 = xy_y_t.y1]), nl_params_(nil)
  1 - output([xy_x_t.x2], [xy_x_t.x1]), filter(nil), 
      access([xy_x_t.x2], [xy_x_t.x1]), partitions(p0)
  2 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil)
  3 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), 
      access([xy_y_t.y2], [xy_y_t.y1]), partitions(p0)

select /*+use_nl(xy_x_t xy_y_t)*/ * from xy_x_t where x1 in (select y1 from xy_y_t where y2 < xy_x_t.x2);
+------+------------+
| x1   | x2         |
+------+------------+
|    0 | yzh        |
|    2 | it's       |
|    2 | VZLUW      |
|    2 | want       |
|    2 | think      |
|    6 | uyslpcybda |
|    6 | u          |
|    9 | TBMEI      |
|    9 | QPPLC      |
|    9 | mdsl       |
+------+------------+

drop table xy_x_t, xy_y_t;
create table xy_x_t(x1 int not null, x2 varchar(100) not null);
create table xy_y_t(y1 int not null, y2 varchar(100) not null);
insert/*insert trace*/ into xy_x_t values(-2139029504,"eyqjoq"),(-2061369344,"GSUGA"),(-1882128384,"there"),(-1552613376,"d"),(-1511981056,"and"),(-1504706560,"and"),(-1259929600,"o"),(-973340672,"at"),(-918945792,"DNMFW"),(-778960896,"r"),(-753336320,"PKGAE"),(-593821696,"UGSPN"),(-457179136,"got"),(-314638336,"will"),(-233701376,"o"),(-104202240,"SUEUH"),(0,"yzh"),(0,"i"),(1,"TQOYB"),(1,"FFHTJ"),(2,"it's"),(2,"ezcuilyxac"),(2,"VZLUW"),(2,"want"),(2,"think"),(3,"prsazev"),(3,"get"),(3,"out"),(4,"a"),(4,"PVYPZ"),(4,"k"),(4,"bpqswbeyqj"),(4,"isjn"),(4,"that's"),(4,"well"),(5,"arkyz"),(5,"w"),(5,"with"),(5,"just"),(5,"PFBCU"),(6,"uyslpcybda"),(6,"co"),(6,"u"),(6,"j"),(6,"g"),(7,"cybdark"),(7,"BKWPE"),(8,"lmdsl"),(8,"NNIGT"),(8,"of"),(9,"etu"),(9,"TBMEI"),(9,"QPPLC"),(9,"mdsl"),(27262976,"n"),(162267136,"to"),(199884800,"y"),(334364672,"h"),(597295104,"did"),(748814336,"rhljip"),(769916928,"OQKEV"),(839778304,"USTRY"),(947585024,"hey"),(1210777600,"want"),(1232601088,"azev"),(1250689024,"a"),(1329463296,"QAMOL"),(1573126144,"zcuilyx"),(1594753024,"yeah"),(1730215936,"PMUMX"),(1925709824,"g"),(2048262144,"b"),(2082275328,"k"),(2131492864,"was");
insert/*insert trace*/ into xy_y_t values(-1992359936,"not"),(-1711210496,"uoorvy"),(-1150287872,"BKNFS"),(-926613504,"was"),(-858128384,"y"),(-549126144,"v"),(-537198592,"now"),(-491651072,"t"),(-66125824,"here"),(0,"XCYGJ"),(1,"YGHBI"),(2,"g"),(6,"kfuoorvyvn"),(7,"EGBLS"),(9,"jsnsdfm"),(1584463872,"face");

EXPLAIN select /*+use_hash(xy_x_t xy_y_t)*/ * from xy_x_t where x1 not in (select y1 from xy_y_t where y2 < xy_x_t.x2);
Query Plan
===============================================
|ID|OPERATOR            |NAME  |EST. ROWS|COST|
-----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|      |69       |180 |
|1 | TABLE SCAN         |xy_y_t|16       |40  |
|2 | TABLE SCAN         |xy_x_t|74       |51  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), 
      equal_conds([xy_x_t.x1 = xy_y_t.y1]), other_conds([xy_y_t.y2 < xy_x_t.x2])
  1 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), 
      access([xy_y_t.y2], [xy_y_t.y1]), partitions(p0)
  2 - output([xy_x_t.x2], [xy_x_t.x1]), filter(nil), 
      access([xy_x_t.x2], [xy_x_t.x1]), partitions(p0)

select /*+use_hash(xy_x_t xy_y_t)*/ * from xy_x_t where x1 not in (select y1 from xy_y_t where y2 < xy_x_t.x2);
+-------------+------------+
| x1          | x2         |
+-------------+------------+
| -2139029504 | eyqjoq     |
| -2061369344 | GSUGA      |
| -1882128384 | there      |
| -1552613376 | d          |
| -1511981056 | and        |
| -1504706560 | and        |
| -1259929600 | o          |
|  -973340672 | at         |
|  -918945792 | DNMFW      |
|  -778960896 | r          |
|  -753336320 | PKGAE      |
|  -593821696 | UGSPN      |
|  -457179136 | got        |
|  -314638336 | will       |
|  -233701376 | o          |
|  -104202240 | SUEUH      |
|           0 | i          |
|           1 | TQOYB      |
|           1 | FFHTJ      |
|           2 | ezcuilyxac |
|           3 | prsazev    |
|           3 | get        |
|           3 | out        |
|           4 | a          |
|           4 | PVYPZ      |
|           4 | k          |
|           4 | bpqswbeyqj |
|           4 | isjn       |
|           4 | that's     |
|           4 | well       |
|           5 | arkyz      |
|           5 | w          |
|           5 | with       |
|           5 | just       |
|           5 | PFBCU      |
|           6 | co         |
|           6 | j          |
|           6 | g          |
|           7 | cybdark    |
|           7 | BKWPE      |
|           8 | lmdsl      |
|           8 | NNIGT      |
|           8 | of         |
|           9 | etu        |
|    27262976 | n          |
|   162267136 | to         |
|   199884800 | y          |
|   334364672 | h          |
|   597295104 | did        |
|   748814336 | rhljip     |
|   769916928 | OQKEV      |
|   839778304 | USTRY      |
|   947585024 | hey        |
|  1210777600 | want       |
|  1232601088 | azev       |
|  1250689024 | a          |
|  1329463296 | QAMOL      |
|  1573126144 | zcuilyx    |
|  1594753024 | yeah       |
|  1730215936 | PMUMX      |
|  1925709824 | g          |
|  2048262144 | b          |
|  2082275328 | k          |
|  2131492864 | was        |
+-------------+------------+
EXPLAIN select /*+use_merge(xy_x_t xy_y_t)*/ * from xy_x_t where x1 not in (select y1 from xy_y_t where y2 < xy_x_t.x2);
Query Plan
==========================================
|ID|OPERATOR       |NAME  |EST. ROWS|COST|
------------------------------------------
|0 |MERGE ANTI JOIN|      |69       |423 |
|1 | SORT          |      |74       |308 |
|2 |  TABLE SCAN   |xy_x_t|74       |51  |
|3 | SORT          |      |16       |92  |
|4 |  TABLE SCAN   |xy_y_t|16       |40  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), 
      equal_conds([xy_x_t.x1 = xy_y_t.y1]), other_conds([xy_y_t.y2 < xy_x_t.x2])
  1 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), sort_keys([xy_x_t.x1, ASC])
  2 - output([xy_x_t.x2], [xy_x_t.x1]), filter(nil), 
      access([xy_x_t.x2], [xy_x_t.x1]), partitions(p0)
  3 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), sort_keys([xy_y_t.y1, ASC])
  4 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), 
      access([xy_y_t.y2], [xy_y_t.y1]), partitions(p0)

select /*+use_merge(xy_x_t xy_y_t)*/ * from xy_x_t where x1 not in (select y1 from xy_y_t where y2 < xy_x_t.x2);
+-------------+------------+
| x1          | x2         |
+-------------+------------+
| -2139029504 | eyqjoq     |
| -2061369344 | GSUGA      |
| -1882128384 | there      |
| -1552613376 | d          |
| -1511981056 | and        |
| -1504706560 | and        |
| -1259929600 | o          |
|  -973340672 | at         |
|  -918945792 | DNMFW      |
|  -778960896 | r          |
|  -753336320 | PKGAE      |
|  -593821696 | UGSPN      |
|  -457179136 | got        |
|  -314638336 | will       |
|  -233701376 | o          |
|  -104202240 | SUEUH      |
|           0 | i          |
|           1 | TQOYB      |
|           1 | FFHTJ      |
|           2 | ezcuilyxac |
|           3 | prsazev    |
|           3 | get        |
|           3 | out        |
|           4 | a          |
|           4 | PVYPZ      |
|           4 | k          |
|           4 | bpqswbeyqj |
|           4 | isjn       |
|           4 | that's     |
|           4 | well       |
|           5 | PFBCU      |
|           5 | just       |
|           5 | with       |
|           5 | arkyz      |
|           5 | w          |
|           6 | co         |
|           6 | j          |
|           6 | g          |
|           7 | cybdark    |
|           7 | BKWPE      |
|           8 | NNIGT      |
|           8 | of         |
|           8 | lmdsl      |
|           9 | etu        |
|    27262976 | n          |
|   162267136 | to         |
|   199884800 | y          |
|   334364672 | h          |
|   597295104 | did        |
|   748814336 | rhljip     |
|   769916928 | OQKEV      |
|   839778304 | USTRY      |
|   947585024 | hey        |
|  1210777600 | want       |
|  1232601088 | azev       |
|  1250689024 | a          |
|  1329463296 | QAMOL      |
|  1573126144 | zcuilyx    |
|  1594753024 | yeah       |
|  1730215936 | PMUMX      |
|  1925709824 | g          |
|  2048262144 | b          |
|  2082275328 | k          |
|  2131492864 | was        |
+-------------+------------+
EXPLAIN select /*+use_nl(xy_x_t xy_y_t)*/ * from xy_x_t where x1 not in (select y1 from xy_y_t where y2 < xy_x_t.x2);
Query Plan
================================================
|ID|OPERATOR             |NAME  |EST. ROWS|COST|
------------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|      |69       |1176|
|1 | TABLE SCAN          |xy_x_t|74       |51  |
|2 | MATERIAL            |      |16       |79  |
|3 |  TABLE SCAN         |xy_y_t|16       |40  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_x_t.x1], [xy_x_t.x2]), filter(nil), 
      conds([xy_y_t.y2 < xy_x_t.x2], [xy_x_t.x1 = xy_y_t.y1]), nl_params_(nil)
  1 - output([xy_x_t.x2], [xy_x_t.x1]), filter(nil), 
      access([xy_x_t.x2], [xy_x_t.x1]), partitions(p0)
  2 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil)
  3 - output([xy_y_t.y2], [xy_y_t.y1]), filter(nil), 
      access([xy_y_t.y2], [xy_y_t.y1]), partitions(p0)

select /*+use_nl(xy_x_t xy_y_t)*/ * from xy_x_t where x1 not in (select y1 from xy_y_t where y2 < xy_x_t.x2);
+-------------+------------+
| x1          | x2         |
+-------------+------------+
| -2139029504 | eyqjoq     |
| -2061369344 | GSUGA      |
| -1882128384 | there      |
| -1552613376 | d          |
| -1511981056 | and        |
| -1504706560 | and        |
| -1259929600 | o          |
|  -973340672 | at         |
|  -918945792 | DNMFW      |
|  -778960896 | r          |
|  -753336320 | PKGAE      |
|  -593821696 | UGSPN      |
|  -457179136 | got        |
|  -314638336 | will       |
|  -233701376 | o          |
|  -104202240 | SUEUH      |
|           0 | i          |
|           1 | TQOYB      |
|           1 | FFHTJ      |
|           2 | ezcuilyxac |
|           3 | prsazev    |
|           3 | get        |
|           3 | out        |
|           4 | a          |
|           4 | PVYPZ      |
|           4 | k          |
|           4 | bpqswbeyqj |
|           4 | isjn       |
|           4 | that's     |
|           4 | well       |
|           5 | arkyz      |
|           5 | w          |
|           5 | with       |
|           5 | just       |
|           5 | PFBCU      |
|           6 | co         |
|           6 | j          |
|           6 | g          |
|           7 | cybdark    |
|           7 | BKWPE      |
|           8 | lmdsl      |
|           8 | NNIGT      |
|           8 | of         |
|           9 | etu        |
|    27262976 | n          |
|   162267136 | to         |
|   199884800 | y          |
|   334364672 | h          |
|   597295104 | did        |
|   748814336 | rhljip     |
|   769916928 | OQKEV      |
|   839778304 | USTRY      |
|   947585024 | hey        |
|  1210777600 | want       |
|  1232601088 | azev       |
|  1250689024 | a          |
|  1329463296 | QAMOL      |
|  1573126144 | zcuilyx    |
|  1594753024 | yeah       |
|  1730215936 | PMUMX      |
|  1925709824 | g          |
|  2048262144 | b          |
|  2082275328 | k          |
|  2131492864 | was        |
+-------------+------------+

drop table xy_x_t, xy_y_t;

### ********************* test right semi/anti join
drop table if exists xy_t1, xy_t2, xy_t3, xy_t4;
create table xy_t1(c1 int, c2 int, key idx_c2(c2, c1));
create table xy_t2(c1 int, c2 int, key idx_c2(c2, c1));
create table xy_t3(c1 int, c2 int, key idx_c2(c2, c1));
create table xy_t4(c1 int, c2 int, key idx_c2(c2, c1));
insert/*insert trace*/ into xy_t1 values(0, 0), (1,1), (2, null),(2,2), (5,5), (5,5), (5,7),(6,7), (6,6), (6, null),(7,7), (7, 0), (8,0), (8,8), (8, 5), (9, 0), (9, 7), (10,10), (null, 1), (1,1), (3,3), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (0, 0), (1,1), (2, null),(2,2), (5,5), (5,5), (5,7),(6,7), (6,6), (6, null),(7,7), (7, 0), (8,0), (8,8), (8, 5), (9, 0), (9, 7), (10,10), (null, 1), (1,1), (3,3), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (0, 0), (1,1), (2, null),(2,2), (5,5), (5,5), (5,7),(6,7), (6,6), (6, null),(7,7), (7, 0), (8,0), (8,8), (8, 5), (9, 0), (9, 7), (10,10), (null, 1), (1,1), (3,3), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (0, 0), (1,1), (2, null),(2,2), (5,5), (5,5), (5,7),(6,7), (6,6), (6, null),(7,7), (7, 0), (8,0), (8,8), (8, 5), (9, 0), (9, 7), (10,10), (null, 1), (1,1), (3,3), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1), (20,1);
insert/*insert trace*/ into xy_t2 values(null, 1), (1,1), (3,3), (5,5), (5,6), (5,4), (6,6), (9,9);
insert/*insert trace*/ into xy_t3 values(1,1), (3,3), (5,5), (5,6), (5,4), (6,6), (9,9), (5,7),(6,7), (6,6), (6, null),(7,7);
insert/*insert trace*/ into xy_t4 values(1,1), (3,3);


***************** RIGHT HASH SEMI 最优
EXPLAIN select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|     |10       |185 |
|1 | TABLE SCAN         |xy_t2|8        |38  |
|2 | TABLE SCAN         |xy_t1|116      |96  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|     |10       |401 |
|1 | TABLE SCAN          |xy_t1|116      |96  |
|2 | MATERIAL            |     |8        |39  |
|3 |  TABLE SCAN         |xy_t2|8        |38  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t2.c1 = xy_t1.c1]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1]), filter(nil)
  3 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|     |10       |185 |
|1 | TABLE SCAN         |xy_t2|8        |38  |
|2 | TABLE SCAN         |xy_t1|116      |96  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE SEMI JOIN|     |10       |311 |
|1 | SORT          |     |116      |245 |
|2 |  TABLE SCAN   |xy_t1|116      |96  |
|3 | SORT          |     |8        |44  |
|4 |  TABLE SCAN   |xy_t2|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    1 |    1 |
|    1 |    1 |
|    1 |    1 |
|    1 |    1 |
|    1 |    1 |
|    1 |    1 |
|    1 |    1 |
|    3 |    3 |
|    3 |    3 |
|    3 |    3 |
|    3 |    3 |
|    5 |    7 |
|    5 |    7 |
|    5 |    5 |
|    5 |    5 |
|    5 |    5 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    5 |    5 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 | NULL |
|    6 |    7 |
|    6 | NULL |
|    6 |    6 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    6 |    6 |
|    6 |    7 |
|    9 |    7 |
|    9 |    0 |
|    9 |    0 |
|    9 |    7 |
|    9 |    7 |
|    9 |    0 |
|    9 |    0 |
|    9 |    7 |
+------+------+
EXPLAIN select /*+ no_rewrite */ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |SUBPLAN FILTER|     |58       |4521|
|1 | TABLE SCAN   |xy_t1|116      |96  |
|2 | TABLE SCAN   |xy_t2|1        |38  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter([(T_OP_EXISTS, subquery(1))]), 
      exec_params_([xy_t1.c1]), onetime_exprs_(nil), init_plan_idxs_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([1]), filter([xy_t2.c1 = ?]), 
      access([xy_t2.c1]), partitions(p0)

select /*+ no_rewrite */ * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
+------+------+


***************** HASH SEMI 最优
EXPLAIN select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |HASH SEMI JOIN|     |8        |184 |
|1 | TABLE SCAN   |xy_t2|8        |38  |
|2 | TABLE SCAN   |xy_t1|116      |93  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    9 |    9 |
|    1 |    1 |
|    6 |    6 |
|    3 |    3 |
|    5 |    4 |
|    5 |    6 |
|    5 |    5 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|     |8        |418 |
|1 | TABLE SCAN          |xy_t2|8        |38  |
|2 | MATERIAL            |     |116      |114 |
|3 |  TABLE SCAN         |xy_t1|116      |93  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      conds([xy_t2.c1 = xy_t1.c1]), nl_params_(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil)
  3 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    6 |
|    5 |    4 |
|    6 |    6 |
|    9 |    9 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |HASH SEMI JOIN|     |8        |184 |
|1 | TABLE SCAN   |xy_t2|8        |38  |
|2 | TABLE SCAN   |xy_t1|116      |93  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    9 |    9 |
|    1 |    1 |
|    6 |    6 |
|    3 |    3 |
|    5 |    4 |
|    5 |    6 |
|    5 |    5 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE SEMI JOIN|     |8        |287 |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t2|8        |38  |
|3 | SORT          |     |116      |220 |
|4 |  TABLE SCAN   |xy_t1|116      |93  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1]), filter(nil), sort_keys([xy_t1.c1, ASC])
  4 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    6 |
|    5 |    4 |
|    6 |    6 |
|    9 |    9 |
+------+------+


****************  NL SEMI 最优
EXPLAIN select * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
=======================================================
|ID|OPERATOR             |NAME         |EST. ROWS|COST|
-------------------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|             |2        |110 |
|1 | TABLE SCAN          |xy_t4        |2        |37  |
|2 | TABLE SCAN          |xy_t1(idx_c2)|1        |36  |
=======================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      conds(nil), nl_params_([xy_t4.c1])
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  2 - output([1]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    3 |    3 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t4 xy_t1)*/ * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
=======================================================
|ID|OPERATOR             |NAME         |EST. ROWS|COST|
-------------------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|             |2        |110 |
|1 | TABLE SCAN          |xy_t4        |2        |37  |
|2 | TABLE SCAN          |xy_t1(idx_c2)|1        |36  |
=======================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      conds(nil), nl_params_([xy_t4.c1])
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  2 - output([1]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t4 xy_t1)*/ * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    3 |    3 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t4 xy_t1)*/ * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
================================================
|ID|OPERATOR      |NAME         |EST. ROWS|COST|
------------------------------------------------
|0 |HASH SEMI JOIN|             |2        |171 |
|1 | TABLE SCAN   |xy_t4        |2        |37  |
|2 | TABLE SCAN   |xy_t1(idx_c2)|116      |93  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      equal_conds([xy_t4.c1 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t4 xy_t1)*/ * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    3 |    3 |
|    1 |    1 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t4 xy_t1)*/ * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |MERGE SEMI JOIN|             |2        |148 |
|1 | SORT          |             |2        |38  |
|2 |  TABLE SCAN   |xy_t4        |2        |37  |
|3 | TABLE SCAN    |xy_t1(idx_c2)|116      |93  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      equal_conds([xy_t4.c1 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), sort_keys([xy_t4.c1, ASC])
  2 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  3 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t4 xy_t1)*/ * from xy_t4 where exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    3 |    3 |
+------+------+


****************  MERGE SEMI 最优
EXPLAIN select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |MERGE SEMI JOIN|             |8        |152 |
|1 | TABLE SCAN    |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN    |xy_t1(idx_c2)|116      |93  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    6 |
|    6 |    6 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
==================================================
|ID|OPERATOR        |NAME         |EST. ROWS|COST|
--------------------------------------------------
|0 |MERGE JOIN      |             |9        |190 |
|1 | TABLE SCAN     |xy_t2(idx_c2)|8        |38  |
|2 | SUBPLAN SCAN   |VIEW2        |101      |133 |
|3 |  MERGE DISTINCT|             |101      |119 |
|4 |   TABLE SCAN   |xy_t1(idx_c2)|116      |93  |
==================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = VIEW2.VIEW1.xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([VIEW2.VIEW1.xy_t1.c2]), filter(nil), 
      access([VIEW2.VIEW1.xy_t1.c2])
  3 - output([xy_t1.c2]), filter(nil), 
      distinct([xy_t1.c2])
  4 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    6 |
|    6 |    6 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
================================================
|ID|OPERATOR      |NAME         |EST. ROWS|COST|
------------------------------------------------
|0 |HASH SEMI JOIN|             |8        |184 |
|1 | TABLE SCAN   |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN   |xy_t1(idx_c2)|116      |93  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
| NULL |    1 |
|    6 |    6 |
|    5 |    6 |
|    3 |    3 |
|    5 |    5 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |MERGE SEMI JOIN|             |8        |152 |
|1 | TABLE SCAN    |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN    |xy_t1(idx_c2)|116      |93  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    6 |
|    6 |    6 |
+------+------+


***************** RIGHT HASH ANTI 最优
EXPLAIN select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|     |107      |185 |
|1 | TABLE SCAN         |xy_t2|8        |38  |
|2 | TABLE SCAN         |xy_t1|116      |96  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|     |107      |401 |
|1 | TABLE SCAN          |xy_t1|116      |96  |
|2 | MATERIAL            |     |8        |39  |
|3 |  TABLE SCAN         |xy_t2|8        |38  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      conds([xy_t2.c1 = xy_t1.c1]), nl_params_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([xy_t2.c1]), filter(nil)
  3 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|     |107      |185 |
|1 | TABLE SCAN         |xy_t2|8        |38  |
|2 | TABLE SCAN         |xy_t1|116      |96  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE ANTI JOIN|     |107      |311 |
|1 | SORT          |     |116      |245 |
|2 |  TABLE SCAN   |xy_t1|116      |96  |
|3 | SORT          |     |8        |44  |
|4 |  TABLE SCAN   |xy_t2|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c1, ASC])
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c1]), filter(nil), sort_keys([xy_t2.c1, ASC])
  4 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
| NULL |    1 |
| NULL |    1 |
| NULL |    1 |
|    0 |    0 |
|    0 |    0 |
|    0 |    0 |
|    0 |    0 |
|    2 | NULL |
|    2 | NULL |
|    2 |    2 |
|    2 |    2 |
|    2 |    2 |
|    2 |    2 |
|    2 | NULL |
|    2 | NULL |
|    7 |    7 |
|    7 |    0 |
|    7 |    7 |
|    7 |    7 |
|    7 |    0 |
|    7 |    0 |
|    7 |    7 |
|    7 |    0 |
|    8 |    5 |
|    8 |    5 |
|    8 |    5 |
|    8 |    8 |
|    8 |    0 |
|    8 |    0 |
|    8 |    0 |
|    8 |    5 |
|    8 |    8 |
|    8 |    8 |
|    8 |    0 |
|    8 |    8 |
|   10 |   10 |
|   10 |   10 |
|   10 |   10 |
|   10 |   10 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+
EXPLAIN select /*+ no_rewrite */ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |SUBPLAN FILTER|     |58       |4521|
|1 | TABLE SCAN   |xy_t1|116      |96  |
|2 | TABLE SCAN   |xy_t2|1        |38  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter([(T_OP_NOT_EXISTS, subquery(1))]), 
      exec_params_([xy_t1.c1]), onetime_exprs_(nil), init_plan_idxs_(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  2 - output([1]), filter([xy_t2.c1 = ?]), 
      access([xy_t2.c1]), partitions(p0)

select /*+ no_rewrite */ * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+


***************** HASH ANTI 最优
EXPLAIN select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |HASH ANTI JOIN|     |0        |184 |
|1 | TABLE SCAN   |xy_t2|8        |38  |
|2 | TABLE SCAN   |xy_t1|116      |93  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|     |0        |418 |
|1 | TABLE SCAN          |xy_t2|8        |38  |
|2 | MATERIAL            |     |116      |114 |
|3 |  TABLE SCAN         |xy_t1|116      |93  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      conds([xy_t2.c1 = xy_t1.c1]), nl_params_(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil)
  3 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |HASH ANTI JOIN|     |0        |184 |
|1 | TABLE SCAN   |xy_t2|8        |38  |
|2 | TABLE SCAN   |xy_t1|116      |93  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE ANTI JOIN|     |0        |287 |
|1 | SORT          |     |8        |46  |
|2 |  TABLE SCAN   |xy_t2|8        |38  |
|3 | SORT          |     |116      |220 |
|4 |  TABLE SCAN   |xy_t1|116      |93  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1]), filter(nil), sort_keys([xy_t1.c1, ASC])
  4 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+


****************  NL ANTI 最优
EXPLAIN select * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
=======================================================
|ID|OPERATOR             |NAME         |EST. ROWS|COST|
-------------------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|             |0        |110 |
|1 | TABLE SCAN          |xy_t4        |2        |37  |
|2 | TABLE SCAN          |xy_t1(idx_c2)|1        |36  |
=======================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      conds(nil), nl_params_([xy_t4.c1])
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  2 - output([1]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
+------+------+
EXPLAIN select /*+ use_nl(xy_t4 xy_t1)*/ * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
=======================================================
|ID|OPERATOR             |NAME         |EST. ROWS|COST|
-------------------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|             |0        |110 |
|1 | TABLE SCAN          |xy_t4        |2        |37  |
|2 | TABLE SCAN          |xy_t1(idx_c2)|1        |36  |
=======================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      conds(nil), nl_params_([xy_t4.c1])
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  2 - output([1]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t4 xy_t1)*/ * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
+------+------+
EXPLAIN select /*+ use_hash(xy_t4 xy_t1)*/ * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
================================================
|ID|OPERATOR      |NAME         |EST. ROWS|COST|
------------------------------------------------
|0 |HASH ANTI JOIN|             |0        |171 |
|1 | TABLE SCAN   |xy_t4        |2        |37  |
|2 | TABLE SCAN   |xy_t1(idx_c2)|116      |93  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      equal_conds([xy_t4.c1 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t4 xy_t1)*/ * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
+------+------+
EXPLAIN select /*+ use_merge(xy_t4 xy_t1)*/ * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |MERGE ANTI JOIN|             |0        |148 |
|1 | SORT          |             |2        |38  |
|2 |  TABLE SCAN   |xy_t4        |2        |37  |
|3 | TABLE SCAN    |xy_t1(idx_c2)|116      |93  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      equal_conds([xy_t4.c1 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), sort_keys([xy_t4.c1, ASC])
  2 - output([xy_t4.c1], [xy_t4.c2]), filter(nil), 
      access([xy_t4.c1], [xy_t4.c2]), partitions(p0)
  3 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t4 xy_t1)*/ * from xy_t4 where not exists (select 1 from xy_t1 where xy_t4.c1 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
+------+------+


****************  MERGE ANTI 最优
EXPLAIN select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |MERGE ANTI JOIN|             |0        |152 |
|1 | TABLE SCAN    |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN    |xy_t1(idx_c2)|116      |93  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    5 |    4 |
|    9 |    9 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
=======================================================
|ID|OPERATOR             |NAME         |EST. ROWS|COST|
-------------------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|             |0        |332 |
|1 | TABLE SCAN          |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN          |xy_t1(idx_c2)|1        |36  |
=======================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      conds(nil), nl_params_([xy_t2.c2])
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([1]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    5 |    4 |
|    9 |    9 |
+------+------+
EXPLAIN select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
================================================
|ID|OPERATOR      |NAME         |EST. ROWS|COST|
------------------------------------------------
|0 |HASH ANTI JOIN|             |0        |184 |
|1 | TABLE SCAN   |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN   |xy_t1(idx_c2)|116      |93  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    9 |    9 |
|    5 |    4 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |MERGE ANTI JOIN|             |0        |152 |
|1 | TABLE SCAN    |xy_t2(idx_c2)|8        |38  |
|2 | TABLE SCAN    |xy_t1(idx_c2)|116      |93  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2]), filter(nil), 
      access([xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t2 xy_t1)*/ * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c2 = xy_t1.c2);
+------+------+
| c1   | c2   |
+------+------+
|    5 |    4 |
|    9 |    9 |
+------+------+


*************** 测试3表情况
EXPLAIN select sum(c1), sum(c2) from xy_t1 where exists (select 1 from xy_t3 where c1 = xy_t1.c1) and  exists (select 1 from xy_t2 where c1 = xy_t1.c1);
Query Plan
================================================
|ID|OPERATOR              |NAME |EST. ROWS|COST|
------------------------------------------------
|0 |SCALAR GROUP BY       |     |1        |240 |
|1 | HASH SEMI JOIN       |     |2        |239 |
|2 |  HASH RIGHT SEMI JOIN|     |10       |185 |
|3 |   TABLE SCAN         |xy_t2|8        |38  |
|4 |   TABLE SCAN         |xy_t1|116      |96  |
|5 |  TABLE SCAN          |xy_t3|12       |38  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)]), filter(nil), 
      group(nil), agg_func([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t3.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  3 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  4 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  5 - output([xy_t3.c1]), filter(nil), 
      access([xy_t3.c1]), partitions(p0)

select sum(c1), sum(c2) from xy_t1 where exists (select 1 from xy_t3 where c1 = xy_t1.c1) and  exists (select 1 from xy_t2 where c1 = xy_t1.c1);
+---------+---------+
| sum(c1) | sum(c2) |
+---------+---------+
|     224 |     168 |
+---------+---------+
EXPLAIN select /*+ use_hash(xy_t3, xy_t1) use_hash(xy_t2, xy_t1)*/ sum(c1), sum(c2) from xy_t1 where exists (select 1 from xy_t3 where c1 = xy_t1.c1) and  exists (select 1 from xy_t2 where c1 = xy_t1.c1);
Query Plan
================================================
|ID|OPERATOR              |NAME |EST. ROWS|COST|
------------------------------------------------
|0 |SCALAR GROUP BY       |     |1        |240 |
|1 | HASH SEMI JOIN       |     |2        |239 |
|2 |  HASH RIGHT SEMI JOIN|     |10       |185 |
|3 |   TABLE SCAN         |xy_t2|8        |38  |
|4 |   TABLE SCAN         |xy_t1|116      |96  |
|5 |  TABLE SCAN          |xy_t3|12       |38  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)]), filter(nil), 
      group(nil), agg_func([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t3.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  3 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  4 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  5 - output([xy_t3.c1]), filter(nil), 
      access([xy_t3.c1]), partitions(p0)

select /*+ use_hash(xy_t3, xy_t1) use_hash(xy_t2, xy_t1)*/ sum(c1), sum(c2) from xy_t1 where exists (select 1 from xy_t3 where c1 = xy_t1.c1) and  exists (select 1 from xy_t2 where c1 = xy_t1.c1);
+---------+---------+
| sum(c1) | sum(c2) |
+---------+---------+
|     224 |     168 |
+---------+---------+
EXPLAIN select /*+ no_rewrite*/ sum(c1), sum(c2) from xy_t1 where exists (select 1 from xy_t3 where c1 = xy_t1.c1) and  exists (select 1 from xy_t2 where c1 = xy_t1.c1);
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SCALAR GROUP BY|     |1        |9061|
|1 | SUBPLAN FILTER|     |29       |9054|
|2 |  TABLE SCAN   |xy_t1|116      |96  |
|3 |  TABLE SCAN   |xy_t3|1        |39  |
|4 |  TABLE SCAN   |xy_t2|1        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)]), filter(nil), 
      group(nil), agg_func([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter([(T_OP_EXISTS, subquery(1))], [(T_OP_EXISTS, subquery(2))]), 
      exec_params_([xy_t1.c1], [xy_t1.c1]), onetime_exprs_(nil), init_plan_idxs_(nil)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  3 - output([1]), filter([xy_t3.c1 = ?]), 
      access([xy_t3.c1]), partitions(p0)
  4 - output([1]), filter([xy_t2.c1 = ?]), 
      access([xy_t2.c1]), partitions(p0)

select /*+ no_rewrite*/ sum(c1), sum(c2) from xy_t1 where exists (select 1 from xy_t3 where c1 = xy_t1.c1) and  exists (select 1 from xy_t2 where c1 = xy_t1.c1);
+---------+---------+
| sum(c1) | sum(c2) |
+---------+---------+
|     224 |     168 |
+---------+---------+


EXPLAIN select sum(c1), sum(c2) from xy_t1 where not exists (select 1 from xy_t3 where c2 = xy_t1.c2) and  exists (select 1 from xy_t2 where c2 = xy_t1.c2);
Query Plan
===================================================
|ID|OPERATOR         |NAME         |EST. ROWS|COST|
---------------------------------------------------
|0 |SCALAR GROUP BY  |             |1        |199 |
|1 | MERGE ANTI JOIN |             |9        |197 |
|2 |  MERGE SEMI JOIN|             |10       |155 |
|3 |   TABLE SCAN    |xy_t1(idx_c2)|116      |96  |
|4 |   TABLE SCAN    |xy_t2(idx_c2)|8        |38  |
|5 |  TABLE SCAN     |xy_t3(idx_c2)|12       |38  |
===================================================

Outputs & filters: 
-------------------------------------
  0 - output([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)]), filter(nil), 
      group(nil), agg_func([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t3.c2 = xy_t1.c2]), other_conds(nil)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds(nil)
  3 - output([xy_t1.c2], [xy_t1.c1]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c1]), partitions(p0)
  4 - output([xy_t2.c2]), filter(nil), 
      access([xy_t2.c2]), partitions(p0)
  5 - output([xy_t3.c2]), filter(nil), 
      access([xy_t3.c2]), partitions(p0)

select sum(c1), sum(c2) from xy_t1 where not exists (select 1 from xy_t3 where c2 = xy_t1.c2) and  exists (select 1 from xy_t2 where c2 = xy_t1.c2);
+---------+---------+
| sum(c1) | sum(c2) |
+---------+---------+
|    NULL |    NULL |
+---------+---------+
EXPLAIN select /*+ no_rewrite*/ sum(c1), sum(c2) from xy_t1 where not exists (select 1 from xy_t3 where c2 = xy_t1.c2) and  exists (select 1 from xy_t2 where c2 = xy_t1.c2);
Query Plan
=================================================
|ID|OPERATOR       |NAME         |EST. ROWS|COST|
-------------------------------------------------
|0 |SCALAR GROUP BY|             |1        |8486|
|1 | SUBPLAN FILTER|             |29       |8479|
|2 |  TABLE SCAN   |xy_t1        |116      |96  |
|3 |  TABLE SCAN   |xy_t3(idx_c2)|1        |36  |
|4 |  TABLE SCAN   |xy_t2(idx_c2)|1        |36  |
=================================================

Outputs & filters: 
-------------------------------------
  0 - output([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)]), filter(nil), 
      group(nil), agg_func([T_FUN_SUM(xy_t1.c1)], [T_FUN_SUM(xy_t1.c2)])
  1 - output([xy_t1.c1], [xy_t1.c2]), filter([(T_OP_NOT_EXISTS, subquery(1))], [(T_OP_EXISTS, subquery(2))]), 
      exec_params_([xy_t1.c2], [xy_t1.c2]), onetime_exprs_(nil), init_plan_idxs_(nil)
  2 - output([xy_t1.c2], [xy_t1.c1]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c1]), partitions(p0)
  3 - output([1]), filter(nil), 
      access([xy_t3.c2]), partitions(p0)
  4 - output([1]), filter(nil), 
      access([xy_t2.c2]), partitions(p0)

select /*+ no_rewrite*/ sum(c1), sum(c2) from xy_t1 where not exists (select 1 from xy_t3 where c2 = xy_t1.c2) and  exists (select 1 from xy_t2 where c2 = xy_t1.c2);
+---------+---------+
| sum(c1) | sum(c2) |
+---------+---------+
|    NULL |    NULL |
+---------+---------+


*************** 测试limit下压 HASH RIGHT SEMI加limit后情况, limit 小时, SEMI代价会小, limit 太大后代价不影响
EXPLAIN select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT SEMI JOIN|     |10       |185 |
|1 | TABLE SCAN         |xy_t2|8        |38  |
|2 | TABLE SCAN         |xy_t1|116      |96  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
+------+------+
EXPLAIN select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 3;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |LIMIT                |     |3        |105 |
|1 | HASH RIGHT SEMI JOIN|     |3        |104 |
|2 |  TABLE SCAN         |xy_t2|8        |38  |
|3 |  TABLE SCAN         |xy_t1|39       |44  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), limit(3), offset(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  3 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 3;
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
+------+------+
EXPLAIN select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 1000;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |LIMIT                |     |10       |186 |
|1 | HASH RIGHT SEMI JOIN|     |10       |185 |
|2 |  TABLE SCAN         |xy_t2|8        |38  |
|3 |  TABLE SCAN         |xy_t1|116      |96  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), limit(1000), offset(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  3 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 1000;
+------+------+
| c1   | c2   |
+------+------+
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
|    1 |    1 |
|    5 |    5 |
|    5 |    5 |
|    5 |    7 |
|    6 |    7 |
|    6 |    6 |
|    6 | NULL |
|    9 |    0 |
|    9 |    7 |
|    1 |    1 |
|    3 |    3 |
+------+------+


*************** 测试limit下压 HASH LEFT SEMI加limit后情况, limit不影响SEMI代价
EXPLAIN select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |HASH SEMI JOIN|     |8        |184 |
|1 | TABLE SCAN   |xy_t2|8        |38  |
|2 | TABLE SCAN   |xy_t1|116      |93  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    9 |    9 |
|    1 |    1 |
|    6 |    6 |
|    3 |    3 |
|    5 |    4 |
|    5 |    6 |
|    5 |    5 |
+------+------+
EXPLAIN select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 3;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |LIMIT          |     |3        |185 |
|1 | HASH SEMI JOIN|     |8        |184 |
|2 |  TABLE SCAN   |xy_t2|8        |38  |
|3 |  TABLE SCAN   |xy_t1|116      |93  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), limit(3), offset(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 3;
+------+------+
| c1   | c2   |
+------+------+
|    9 |    9 |
|    1 |    1 |
|    6 |    6 |
+------+------+
EXPLAIN select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 1000;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |LIMIT          |     |8        |185 |
|1 | HASH SEMI JOIN|     |8        |184 |
|2 |  TABLE SCAN   |xy_t2|8        |38  |
|3 |  TABLE SCAN   |xy_t1|116      |93  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), limit(1000), offset(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 1000;
+------+------+
| c1   | c2   |
+------+------+
|    9 |    9 |
|    1 |    1 |
|    6 |    6 |
|    3 |    3 |
|    5 |    4 |
|    5 |    6 |
|    5 |    5 |
+------+------+


*************** 测试limit下压 HASH RIGHT ANTI加limit后情况, limit 小时, ANTI代价会小, limit 太大后代价不影响
EXPLAIN select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
Query Plan
==============================================
|ID|OPERATOR            |NAME |EST. ROWS|COST|
----------------------------------------------
|0 |HASH RIGHT ANTI JOIN|     |107      |185 |
|1 | TABLE SCAN         |xy_t2|8        |38  |
|2 | TABLE SCAN         |xy_t1|116      |96  |
==============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+
EXPLAIN select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 3;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |LIMIT                |     |3        |85  |
|1 | HASH RIGHT ANTI JOIN|     |3        |84  |
|2 |  TABLE SCAN         |xy_t2|8        |38  |
|3 |  TABLE SCAN         |xy_t1|4        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), limit(3), offset(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  3 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 3;
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
+------+------+
EXPLAIN select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 1000;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |LIMIT                |     |107      |200 |
|1 | HASH RIGHT ANTI JOIN|     |107      |185 |
|2 |  TABLE SCAN         |xy_t2|8        |38  |
|3 |  TABLE SCAN         |xy_t1|116      |96  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), limit(1000), offset(nil)
  1 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1]), filter(nil), 
      access([xy_t2.c1]), partitions(p0)
  3 - output([xy_t1.c1], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select * from xy_t1 where not exists (select 1 from xy_t2 where xy_t2.c1 = xy_t1.c1) limit 1000;
+------+------+
| c1   | c2   |
+------+------+
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|    0 |    0 |
|    2 | NULL |
|    2 |    2 |
|    7 |    7 |
|    7 |    0 |
|    8 |    0 |
|    8 |    8 |
|    8 |    5 |
|   10 |   10 |
| NULL |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
|   20 |    1 |
+------+------+


*************** 测试limit下压 HASH LEFT ANTI加limit后情况, limit 不影响ANTI代价
EXPLAIN select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |HASH ANTI JOIN|     |0        |184 |
|1 | TABLE SCAN   |xy_t2|8        |38  |
|2 | TABLE SCAN   |xy_t1|116      |93  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1);
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+
EXPLAIN select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 3;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |LIMIT          |     |0        |184 |
|1 | HASH ANTI JOIN|     |0        |184 |
|2 |  TABLE SCAN   |xy_t2|8        |38  |
|3 |  TABLE SCAN   |xy_t1|116      |93  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), limit(3), offset(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 3;
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+
EXPLAIN select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 1000;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |LIMIT          |     |0        |184 |
|1 | HASH ANTI JOIN|     |0        |184 |
|2 |  TABLE SCAN   |xy_t2|8        |38  |
|3 |  TABLE SCAN   |xy_t1|116      |93  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), limit(1000), offset(nil)
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds(nil)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1]), filter(nil), 
      access([xy_t1.c1]), partitions(p0)

select * from xy_t2 where not exists (select 1 from xy_t1 where xy_t2.c1 = xy_t1.c1) limit 1000;
+------+------+
| c1   | c2   |
+------+------+
| NULL |    1 |
+------+------+

drop table xy_t1, xy_t2, xy_t3;


************** 测试SEMI/ANTI 含unique order的场景
create table xy_t1(c1 int primary key, c2 int, c3 int);
create table xy_t2(c1 int primary key, c2 int, c3 int);
insert/*insert trace*/ into xy_t1 values(0, 0, 0), (1,1, 1), (2,2, 2), (3,5, 5), (5,5, 5), (6,7,7), (7,6, 6), (8, 7,8);
insert/*insert trace*/ into xy_t2 values(1,1, 1), (3,3,3), (4,5,5), (5,5, 5), (6,6,7);


//两边都无序hash right
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |SORT                 |     |2        |87  |
|1 | HASH RIGHT SEMI JOIN|     |2        |85  |
|2 |  TABLE SCAN         |xy_t2|5        |37  |
|3 |  TABLE SCAN         |xy_t1|8        |38  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC])
  1 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      equal_conds([xy_t1.c2 = xy_t2.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    6 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
==========================================
|ID|OPERATOR        |NAME |EST. ROWS|COST|
------------------------------------------
|0 |SORT            |     |2        |92  |
|1 | MERGE SEMI JOIN|     |2        |90  |
|2 |  SORT          |     |8        |46  |
|3 |   TABLE SCAN   |xy_t1|8        |38  |
|4 |  SORT          |     |5        |42  |
|5 |   TABLE SCAN   |xy_t2|5        |37  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC]), prefix_pos(1)
  1 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      equal_conds([xy_t1.c2 = xy_t2.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC])
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)
  4 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c2, ASC])
  5 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    6 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
================================================
|ID|OPERATOR              |NAME |EST. ROWS|COST|
------------------------------------------------
|0 |SORT                  |     |2        |94  |
|1 | NESTED-LOOP SEMI JOIN|     |2        |92  |
|2 |  TABLE SCAN          |xy_t1|8        |38  |
|3 |  MATERIAL            |     |5        |39  |
|4 |   TABLE SCAN         |xy_t2|5        |37  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC])
  1 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      conds([xy_t1.c3 < xy_t2.c3], [xy_t1.c2 = xy_t2.c2]), nl_params_(nil)
  2 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c3], [xy_t2.c2]), filter(nil)
  4 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    6 |
+------+------+
EXPLAIN select /*+ no_rewrite*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |4        |342 |
|1 | SUBPLAN FILTER|     |4        |338 |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 |  TABLE SCAN   |xy_t2|2        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC])
  1 - output([xy_t1.c2], [xy_t1.c3]), filter([xy_t1.c2 = ANY(subquery(1))]), 
      exec_params_([xy_t1.c3]), onetime_exprs_(nil), init_plan_idxs_(nil)
  2 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)
  3 - output([xy_t2.c2]), filter([? < xy_t2.c3]), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)

select /*+ no_rewrite*/ c2, c3 from xy_t1 where c2 in (select c2 from xy_t2 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    6 |
+------+------+


//两边都无序hash left
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |2        |87  |
|1 | HASH SEMI JOIN|     |2        |85  |
|2 |  TABLE SCAN   |xy_t2|5        |37  |
|3 |  TABLE SCAN   |xy_t1|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC])
  1 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    7 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
==========================================
|ID|OPERATOR        |NAME |EST. ROWS|COST|
------------------------------------------
|0 |SORT            |     |2        |92  |
|1 | MERGE SEMI JOIN|     |2        |90  |
|2 |  SORT          |     |5        |42  |
|3 |   TABLE SCAN   |xy_t2|5        |37  |
|4 |  SORT          |     |8        |46  |
|5 |   TABLE SCAN   |xy_t1|8        |38  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC]), prefix_pos(1)
  1 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      equal_conds([xy_t2.c2 = xy_t1.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC])
  3 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)
  4 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c2, ASC])
  5 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    7 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
================================================
|ID|OPERATOR              |NAME |EST. ROWS|COST|
------------------------------------------------
|0 |SORT                  |     |2        |95  |
|1 | NESTED-LOOP SEMI JOIN|     |2        |93  |
|2 |  TABLE SCAN          |xy_t2|5        |37  |
|3 |  MATERIAL            |     |8        |41  |
|4 |   TABLE SCAN         |xy_t1|8        |38  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC])
  1 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      conds([xy_t1.c3 < xy_t2.c3], [xy_t2.c2 = xy_t1.c2]), nl_params_(nil)
  2 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil)
  4 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    7 |
+------+------+
EXPLAIN select /*+ no_rewrite*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |3        |232 |
|1 | SUBPLAN FILTER|     |3        |230 |
|2 |  TABLE SCAN   |xy_t2|5        |37  |
|3 |  TABLE SCAN   |xy_t1|3        |39  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC])
  1 - output([xy_t2.c2], [xy_t2.c3]), filter([xy_t2.c2 = ANY(subquery(1))]), 
      exec_params_([xy_t2.c3]), onetime_exprs_(nil), init_plan_idxs_(nil)
  2 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c2]), filter([xy_t1.c3 < ?]), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ no_rewrite*/ c2, c3 from xy_t2 where c2 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    6 |    7 |
+------+------+


//两边唯一有序, 改写为inner join
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c1 from xy_t1 where xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
======================================
|ID|OPERATOR    |NAME |EST. ROWS|COST|
--------------------------------------
|0 |SORT        |     |2        |87  |
|1 | HASH JOIN  |     |2        |85  |
|2 |  TABLE SCAN|xy_t2|5        |37  |
|3 |  TABLE SCAN|xy_t1|8        |38  |
======================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds([xy_t1.c2 < xy_t2.c2])
  2 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  3 - output([xy_t1.c2], [xy_t1.c1]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c1]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c1 from xy_t1 where xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
+----+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c1 from xy_t1 where xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
=====================================
|ID|OPERATOR   |NAME |EST. ROWS|COST|
-------------------------------------
|0 |MERGE JOIN |     |2        |78  |
|1 | TABLE SCAN|xy_t2|5        |37  |
|2 | TABLE SCAN|xy_t1|8        |38  |
=====================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c1]), other_conds([xy_t1.c2 < xy_t2.c2])
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c2], [xy_t1.c1]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c1]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c1 from xy_t1 where xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
+----+------+
EXPLAIN select /*+ no_rewrite*/ c1, c2 from xy_t2 where c1 in (select c1 from xy_t1 where xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |SUBPLAN FILTER|     |3        |229 |
|1 | TABLE SCAN   |xy_t2|5        |37  |
|2 | TABLE SCAN   |xy_t1|3        |38  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter([xy_t2.c1 = ANY(subquery(1))]), 
      exec_params_([xy_t2.c2]), onetime_exprs_(nil), init_plan_idxs_(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([xy_t1.c1]), filter([xy_t1.c2 < ?]), 
      access([xy_t1.c2], [xy_t1.c1]), partitions(p0)

select /*+ no_rewrite*/ c1, c2 from xy_t2 where c1 in (select c1 from xy_t1 where xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
+----+------+


// 一边唯一有序
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |2        |88  |
|1 | HASH SEMI JOIN|     |2        |86  |
|2 |  TABLE SCAN   |xy_t2|5        |37  |
|3 |  TABLE SCAN   |xy_t1|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  6 |    6 |
+----+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE SEMI JOIN|     |2        |86  |
|1 | TABLE SCAN    |xy_t2|5        |37  |
|2 | SORT          |     |8        |46  |
|3 |  TABLE SCAN   |xy_t1|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t2.c1 = xy_t1.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  1 - output([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c2, ASC])
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  6 |    6 |
+----+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP SEMI JOIN|     |2        |93  |
|1 | TABLE SCAN          |xy_t2|5        |37  |
|2 | MATERIAL            |     |8        |41  |
|3 |  TABLE SCAN         |xy_t1|8        |38  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      conds([xy_t1.c3 < xy_t2.c3], [xy_t2.c1 = xy_t1.c2]), nl_params_(nil)
  1 - output([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c3], [xy_t1.c2]), filter(nil)
  3 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  6 |    6 |
+----+------+
EXPLAIN select /*+ no_rewrite*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |SUBPLAN FILTER|     |3        |230 |
|1 | TABLE SCAN   |xy_t2|5        |37  |
|2 | TABLE SCAN   |xy_t1|3        |39  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter([xy_t2.c1 = ANY(subquery(1))]), 
      exec_params_([xy_t2.c3]), onetime_exprs_(nil), init_plan_idxs_(nil)
  1 - output([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c3], [xy_t2.c1], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c2]), filter([xy_t1.c3 < ?]), 
      access([xy_t1.c3], [xy_t1.c2]), partitions(p0)

select /*+ no_rewrite*/ c1, c2 from xy_t2 where c1 in (select c2 from xy_t1 where xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  6 |    6 |
+----+------+


//两边都无序hash right
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |SORT                 |     |7        |91  |
|1 | HASH RIGHT ANTI JOIN|     |7        |85  |
|2 |  TABLE SCAN         |xy_t2|5        |37  |
|3 |  TABLE SCAN         |xy_t1|8        |38  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC])
  1 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      equal_conds([xy_t1.c2 = xy_t2.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)
  3 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    7 |    7 |
|    7 |    8 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
==========================================
|ID|OPERATOR        |NAME |EST. ROWS|COST|
------------------------------------------
|0 |SORT            |     |7        |95  |
|1 | MERGE ANTI JOIN|     |7        |90  |
|2 |  SORT          |     |8        |46  |
|3 |   TABLE SCAN   |xy_t1|8        |38  |
|4 |  SORT          |     |5        |42  |
|5 |   TABLE SCAN   |xy_t2|5        |37  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC]), prefix_pos(1)
  1 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      equal_conds([xy_t1.c2 = xy_t2.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC])
  3 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)
  4 - output([xy_t2.c3], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c2, ASC])
  5 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    7 |    7 |
|    7 |    8 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
================================================
|ID|OPERATOR              |NAME |EST. ROWS|COST|
------------------------------------------------
|0 |SORT                  |     |7        |98  |
|1 | NESTED-LOOP ANTI JOIN|     |7        |92  |
|2 |  TABLE SCAN          |xy_t1|8        |38  |
|3 |  MATERIAL            |     |5        |39  |
|4 |   TABLE SCAN         |xy_t2|5        |37  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC])
  1 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      conds([xy_t1.c2 = xy_t2.c2], [xy_t1.c3 < xy_t2.c3]), nl_params_(nil)
  2 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)
  3 - output([xy_t2.c2], [xy_t2.c3]), filter(nil)
  4 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    7 |    7 |
|    7 |    8 |
+------+------+
EXPLAIN select /*+ no_rewrite*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |4        |344 |
|1 | SUBPLAN FILTER|     |4        |340 |
|2 |  TABLE SCAN   |xy_t1|8        |38  |
|3 |  TABLE SCAN   |xy_t2|1        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), sort_keys([xy_t1.c2, ASC], [xy_t1.c3, ASC])
  1 - output([xy_t1.c2], [xy_t1.c3]), filter([(T_OP_NOT_EXISTS, subquery(1))]), 
      exec_params_([xy_t1.c2], [xy_t1.c3]), onetime_exprs_(nil), init_plan_idxs_(nil)
  2 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)
  3 - output([1]), filter([? = xy_t2.c2], [? < xy_t2.c3]), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)

select /*+ no_rewrite*/ c2, c3 from xy_t1 where not exists (select 1 from xy_t2 where xy_t1.c2 = xy_t2.c2 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    0 |    0 |
|    1 |    1 |
|    2 |    2 |
|    5 |    5 |
|    5 |    5 |
|    7 |    7 |
|    7 |    8 |
+------+------+


//两边都无序hash left
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |4        |88  |
|1 | HASH ANTI JOIN|     |4        |85  |
|2 |  TABLE SCAN   |xy_t2|5        |37  |
|3 |  TABLE SCAN   |xy_t1|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC])
  1 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      equal_conds([xy_t1.c2 = xy_t2.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)
  3 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    5 |
+------+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
==========================================
|ID|OPERATOR        |NAME |EST. ROWS|COST|
------------------------------------------
|0 |SORT            |     |4        |93  |
|1 | MERGE ANTI JOIN|     |4        |90  |
|2 |  SORT          |     |5        |42  |
|3 |   TABLE SCAN   |xy_t2|5        |37  |
|4 |  SORT          |     |8        |46  |
|5 |   TABLE SCAN   |xy_t1|8        |38  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC]), prefix_pos(1)
  1 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      equal_conds([xy_t1.c2 = xy_t2.c2]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC])
  3 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)
  4 - output([xy_t1.c3], [xy_t1.c2]), filter(nil), sort_keys([xy_t1.c2, ASC])
  5 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    5 |
+------+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
================================================
|ID|OPERATOR              |NAME |EST. ROWS|COST|
------------------------------------------------
|0 |SORT                  |     |4        |96  |
|1 | NESTED-LOOP ANTI JOIN|     |4        |93  |
|2 |  TABLE SCAN          |xy_t2|5        |37  |
|3 |  MATERIAL            |     |8        |41  |
|4 |   TABLE SCAN         |xy_t1|8        |38  |
================================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC])
  1 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      conds([xy_t1.c2 = xy_t2.c2], [xy_t1.c3 < xy_t2.c3]), nl_params_(nil)
  2 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)
  3 - output([xy_t1.c2], [xy_t1.c3]), filter(nil)
  4 - output([xy_t1.c2], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    5 |
+------+------+
EXPLAIN select /*+ no_rewrite*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |3        |234 |
|1 | SUBPLAN FILTER|     |3        |232 |
|2 |  TABLE SCAN   |xy_t2|5        |37  |
|3 |  TABLE SCAN   |xy_t1|1        |39  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), sort_keys([xy_t2.c2, ASC], [xy_t2.c3, ASC])
  1 - output([xy_t2.c2], [xy_t2.c3]), filter([(T_OP_NOT_EXISTS, subquery(1))]), 
      exec_params_([xy_t2.c2], [xy_t2.c3]), onetime_exprs_(nil), init_plan_idxs_(nil)
  2 - output([xy_t2.c2], [xy_t2.c3]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c3]), partitions(p0)
  3 - output([1]), filter([xy_t1.c2 = ?], [xy_t1.c3 < ?]), 
      access([xy_t1.c2], [xy_t1.c3]), partitions(p0)

select /*+ no_rewrite*/ c2, c3 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c2 = xy_t2.c2 and  xy_t1.c3 < xy_t2.c3) order by 1,2;
+------+------+
| c2   | c3   |
+------+------+
|    1 |    1 |
|    3 |    3 |
|    5 |    5 |
|    5 |    5 |
+------+------+


// 两边唯一有序
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |SORT           |     |4        |90  |
|1 | HASH ANTI JOIN|     |4        |86  |
|2 |  TABLE SCAN   |xy_t2|5        |37  |
|3 |  TABLE SCAN   |xy_t1|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c3 < xy_t2.c3])
  2 - output([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), partitions(p0)
  3 - output([xy_t1.c1], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c3]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
=========================================
|ID|OPERATOR       |NAME |EST. ROWS|COST|
-----------------------------------------
|0 |MERGE ANTI JOIN|     |4        |78  |
|1 | TABLE SCAN    |xy_t2|5        |37  |
|2 | TABLE SCAN    |xy_t1|8        |38  |
=========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([xy_t1.c1 = xy_t2.c1]), other_conds([xy_t1.c3 < xy_t2.c3])
  1 - output([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), partitions(p0)
  2 - output([xy_t1.c1], [xy_t1.c3]), filter(nil), 
      access([xy_t1.c1], [xy_t1.c3]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |NESTED-LOOP ANTI JOIN|     |4        |219 |
|1 | TABLE SCAN          |xy_t2|5        |37  |
|2 | TABLE GET           |xy_t1|1        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      conds(nil), nl_params_([xy_t2.c1], [xy_t2.c3])
  1 - output([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), partitions(p0)
  2 - output([1]), filter([xy_t1.c3 < ?]), 
      access([xy_t1.c3]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+
EXPLAIN select /*+ no_rewrite*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |SUBPLAN FILTER|     |3        |218 |
|1 | TABLE SCAN   |xy_t2|5        |37  |
|2 | TABLE GET    |xy_t1|1        |37  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter([(T_OP_NOT_EXISTS, subquery(1))]), 
      exec_params_([xy_t2.c1], [xy_t2.c3]), onetime_exprs_(nil), init_plan_idxs_(nil)
  1 - output([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), filter(nil), 
      access([xy_t2.c1], [xy_t2.c3], [xy_t2.c2]), partitions(p0)
  2 - output([1]), filter([xy_t1.c3 < ?]), 
      access([xy_t1.c3]), partitions(p0)

select /*+ no_rewrite*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c1 and xy_t1.c3 < xy_t2.c3) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+


//一边唯一有序
EXPLAIN select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
===============================================
|ID|OPERATOR             |NAME |EST. ROWS|COST|
-----------------------------------------------
|0 |SORT                 |     |3        |83  |
|1 | HASH RIGHT ANTI JOIN|     |3        |82  |
|2 |  SUBPLAN SCAN       |VIEW1|3        |39  |
|3 |   TABLE SCAN        |xy_t1|3        |38  |
|4 |  TABLE SCAN         |xy_t2|5        |37  |
===============================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([VIEW1.xy_t1.c1 = xy_t2.c2]), other_conds(nil)
  2 - output([VIEW1.xy_t1.c1]), filter(nil), 
      access([VIEW1.xy_t1.c1])
  3 - output([xy_t1.c1]), filter([xy_t1.c1 > xy_t1.c2]), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)
  4 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)

select /*+ use_hash(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+
EXPLAIN select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
==========================================
|ID|OPERATOR        |NAME |EST. ROWS|COST|
------------------------------------------
|0 |SORT            |     |3        |84  |
|1 | MERGE ANTI JOIN|     |3        |83  |
|2 |  SORT          |     |5        |42  |
|3 |   TABLE SCAN   |xy_t2|5        |37  |
|4 |  SUBPLAN SCAN  |VIEW1|3        |39  |
|5 |   TABLE SCAN   |xy_t1|3        |38  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([VIEW1.xy_t1.c1 = xy_t2.c2]), other_conds(nil)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c2, ASC])
  3 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  4 - output([VIEW1.xy_t1.c1]), filter(nil), 
      access([VIEW1.xy_t1.c1])
  5 - output([xy_t1.c1]), filter([xy_t1.c1 > xy_t1.c2]), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ use_merge(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+
EXPLAIN select /*+ use_nl(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
==========================================
|ID|OPERATOR        |NAME |EST. ROWS|COST|
------------------------------------------
|0 |SORT            |     |3        |84  |
|1 | MERGE ANTI JOIN|     |3        |83  |
|2 |  SORT          |     |5        |42  |
|3 |   TABLE SCAN   |xy_t2|5        |37  |
|4 |  SUBPLAN SCAN  |VIEW1|3        |39  |
|5 |   TABLE SCAN   |xy_t1|3        |38  |
==========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c1, ASC])
  1 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), 
      equal_conds([VIEW1.xy_t1.c1 = xy_t2.c2]), other_conds(nil)
  2 - output([xy_t2.c1], [xy_t2.c2]), filter(nil), sort_keys([xy_t2.c2, ASC])
  3 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  4 - output([VIEW1.xy_t1.c1]), filter(nil), 
      access([VIEW1.xy_t1.c1])
  5 - output([xy_t1.c1]), filter([xy_t1.c1 > xy_t1.c2]), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ use_nl(xy_t1 xy_t2)*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+
EXPLAIN select /*+ no_rewrite*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
Query Plan
========================================
|ID|OPERATOR      |NAME |EST. ROWS|COST|
----------------------------------------
|0 |SUBPLAN FILTER|     |3        |218 |
|1 | TABLE SCAN   |xy_t2|5        |37  |
|2 | TABLE GET    |xy_t1|1        |37  |
========================================

Outputs & filters: 
-------------------------------------
  0 - output([xy_t2.c1], [xy_t2.c2]), filter([(T_OP_NOT_EXISTS, subquery(1))]), 
      exec_params_([xy_t2.c2]), onetime_exprs_(nil), init_plan_idxs_(nil)
  1 - output([xy_t2.c2], [xy_t2.c1]), filter(nil), 
      access([xy_t2.c2], [xy_t2.c1]), partitions(p0)
  2 - output([1]), filter([xy_t1.c1 > xy_t1.c2]), 
      access([xy_t1.c1], [xy_t1.c2]), partitions(p0)

select /*+ no_rewrite*/ c1, c2 from xy_t2 where not exists (select 1 from xy_t1 where xy_t1.c1 = xy_t2.c2 and xy_t1.c2 < xy_t2.c2) order by 1,2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  3 |    3 |
|  4 |    5 |
|  5 |    5 |
|  6 |    6 |
+----+------+

drop table xy_t1, xy_t2;


